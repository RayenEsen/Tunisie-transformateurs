<div *ngIf="loading === true" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 9999;">
  <p-progressSpinner ariaLabel="loading"></p-progressSpinner>
</div>


<div class="formbold-main-wrapper">
  <!-- Author: FormBold Team -->
  <!-- Learn More: https://formbold.com -->
  <div class="formbold-form-wrapper"  [style.pointer-events]="loading ? 'none' : 'auto'">
         <img src="assets/Logo.png" style="margin-left: 320px;">
      <div class="formbold-input-wrapp formbold-mb-3">
        <label for="firstname" class="formbold-form-label" style="color: #122151;"> Marque / Numero <small style="color: red;">*</small></label>
        <div>
          <input
            placeholder="Tunisie transformateurs"
            class="formbold-form-input"
            name="marque"
            [(ngModel)]="transformateurAjouter.marque"
          />

          <input
            name="numero"
            placeholder="Numero"
            class="formbold-form-input"
            [(ngModel)]="transformateurAjouter.numero"
          />
        </div>
      </div>

        <div class="formbold-mb-3">
        <label class="formbold-form-label" style="color: #122151;">Mission<small style="color: red;">*</small></label>
        <p-dropdown [style]="{'width': '100%'}" [options]="Missions" [(ngModel)]="etat" optionLabel="name" [showClear]="true" placeholder="Sélectionner le Mission" (onChange)="onMissionChange($event)">
          <ng-template pTemplate="selectedItem">
            <div class="flex align-items-center gap-2" *ngIf="selectedMission">
              <img [src]="getMissionImageUrl(selectedMission)" style="width: 18px; height: 18px; vertical-align: middle; margin-right: 5px;" />
              <div style="display: inline-block;">{{ selectedMission.name }}</div>
            </div>
          </ng-template>
          <ng-template let-mission pTemplate="item">
            <div class="flex align-items-center gap-2">
              <img [src]="getMissionImageUrl(mission)" style="width: 18px; height: 18px; vertical-align: middle; margin-right: 5px;" />
              <div style="display: inline-block;">{{ mission.name }}</div>
            </div>
          </ng-template>
        </p-dropdown>



      </div>

      <div class="formbold-mb-3">
        <label for="age" class="formbold-form-label" style="color: #122151;"> Client <small style="color: red;">*</small></label>
        <input
          name="client"
          placeholder="Client"
          class="formbold-form-input"
          [(ngModel)]="transformateurAjouter.client"

        />
      </div>

      <div class="formbold-mb-3">
        <label class="formbold-form-label" style="color: #122151;">Couplage<small style="color: red;">*</small></label>
        <select class="formbold-form-input" name="occupation" id="occupation" name="couplage" [(ngModel)]="transformateurAjouter.couplage">
          <option value="" disabled selected>Sélectionner le couplage</option>
          <option value="Mono">Mono</option>
          <option value="YNYN">Ynyn</option>
          <option value="DYN">Dyn</option>
          <option value="YZ">YZ</option>
        </select>
      </div>

      <div class="formbold-mb-3">
        <label for="email" class="formbold-form-label" style="color: #122151;"> Puissance (KVA) <small style="color: red;">*</small></label>
        <input
          name="power"
          placeholder="Puissance"
          class="formbold-form-input"
          [(ngModel)]="transformateurAjouter.power"
        />
      </div>

      <div class="formbold-mb-3">

        <label for="address" class="formbold-form-label" style="color: #122151;"> Prises <small style="color: red;">*</small></label>


        <p-dropdown [style]="{'width': '100%'}" [options]="prisesOptions" [(ngModel)]="transformateurAjouter.prises" optionLabel="label" optionValue="value" [showClear]="true" placeholder="Prises"></p-dropdown>

      </div>
      <div class="formbold-mb-3">
        <label class="formbold-form-label" style="color: #122151;">Type<small style="color: red;">*</small></label>
        <select class="formbold-form-input" name="occupation" id="occupation" name="couplage" [(ngModel)]="transformateurAjouter.type">
          <option value="" disabled selected>Sélectionner le type</option>
          <option value="Triphasés">Triphasés</option>
          <option value="Monophasés">Monophasés</option>
          <option value="Résine">Biphasé</option>
        </select>

      </div>
      <div class="formbold-mb-3">
        <label for="address" class="formbold-form-label" style="color: #122151;"> MT:U1 (KV) <small style="color: red;">*</small></label>

        <input
          name="mtu1"
          placeholder="MT:U1"
          class="formbold-form-input formbold-mb-3"
          [(ngModel)]="transformateurAjouter.mtu1"
        />
        <label for="address" class="formbold-form-label" style="color: #122151;"> BT:U2 (V)<small style="color: red;">*</small></label>

        <input
          name="btu2"
          placeholder="BT:U2"
          class="formbold-form-input"
          [(ngModel)]="transformateurAjouter.btu2"
        />
      </div>

      <div class="formbold-input-wrapp formbold-mb-3">
        <label for="firstname" class="formbold-form-label" style="color: #122151;"> Libelle <small style="color: red;">*</small></label>
        <div>
          <select class="formbold-form-input" name="occupation" id="occupation" name="couplage" [(ngModel)]="transformateurAjouter.libelle">
            <option value="" disabled selected>Sélectionner le Libelle</option>
            <option value="Aluminum">Aluminum</option>
            <option value="Cuivre">Cuivre</option>
          </select>
        </div>
      </div>

      <div class="formbold-input-wrapp formbold-mb-3" >
        <label  for="firstname" class="formbold-form-label" style="color: #122151;"> Accessoires <small style="color: red;">*</small></label>
        <p-multiSelect [style]="{'width': '100%'}" [options]="Accessoires" placeholder="Sélectionner les Accessoires" [(ngModel)]="SelectedAccesoires"  optionLabel="name"></p-multiSelect>
      </div>

      <div class="formbold-input-wrapp formbold-mb-3">
        <label for="borne" class="formbold-form-label" style="color: #122151;">Borne <small style="color: red;">*</small></label>
        <p-treeSelect class="md:w-20rem w-full" containerStyleClass="w-full" [(ngModel)]="SelectedNode" [options]="nodes" optionLabel="label" placeholder="Sélectionner la Borne"></p-treeSelect>
      </div>


      <div class="formbold-input-wrapp formbold-mb-3">
        <label for="firstname" class="formbold-form-label" style="color: #122151;"> Position <small style="color: red;">*</small></label>
        <div>
          <select class="formbold-form-input" name="Accessoires" id="occupation"  [(ngModel)]="transformateurAjouter.bornesembrochables">
            <option value="" disabled selected>Sélectionner les Positions</option>
            <option value="3POS">3POS</option>
            <option value="5POS">5POS</option>
          </select>
        </div>
      </div>

      <div class="formbold-mb-3">
        <label for="upload" class="formbold-form-label" style="color: #122151;">
          Téléchargez une photo
        </label>
        <input
          type="file"
          name="upload"
          id="upload"
          class="formbold-form-input formbold-form-file"
        />
      </div>

      <div class="formbold-checkbox-wrapper">
        <label for="supportCheckbox" class="formbold-checkbox-label">
          <div class="formbold-relative">
            <input
              type="checkbox"
              id="supportCheckbox"
              class="formbold-input-checkbox"
            />
          </div>
        </label>
      </div>
      <p-toast></p-toast>
      <button class="formbold-btn" label="Submit" (click)="submitForm()">Ajouter</button>

  </div>
</div>
